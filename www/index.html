&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;
    &amp;lt;head&amp;gt;
        &amp;lt;meta charset="utf-8" /&amp;gt;
        &amp;lt;meta name="format-detection" content="telephone=no" /&amp;gt;
        &amp;lt;meta name="msapplication-tap-highlight" content="no" /&amp;gt;
        &amp;lt;!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 --&amp;gt;
        &amp;lt;meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, width=device-width" /&amp;gt;
        &amp;lt;link rel="stylesheet" type="text/css" href="css/index.css" /&amp;gt;
        &amp;lt;title&amp;gt;Hello World&amp;lt;/title&amp;gt;
        &amp;lt;script src="http://code.jquery.com/jquery-1.11.3.min.js"&amp;gt;&amp;lt;/script&amp;gt;
        &amp;lt;script src="js/tools.js"&amp;gt;&amp;lt;/script&amp;gt;
        &amp;lt;script&amp;gt;
            function onClick(){
                $.ajax
                ({
                      type: "GET",
                      url: "http://telus.crontopia.com/telus/updatecode.php",
                      async: false,
                      success: function (data){
                        if (data == "OK"){
                          alert('Rebuild In Progress !!...'); 
                        } else {
                          alert('Error in Rebuild Process...' + data);
                        }
                      },
                      error: function (msg){
                        alert('Sorry no se pudo contactar al proxy de telus: ' + msg.responseText); 
                      }
                });
            }
            function getContent(){
                $.ajax
                ({
                      type: "GET",
                      url: "https://api.github.com/repos/agendacultural/phonegap-start/contents/www/index.html",
                      async: false,
                      dataType: 'json',
                      beforeSend: function (xhr) {
                         xhr.setRequestHeader('Authorization', make_base_auth('agendacultural@misideas.me', 'psclcdGH7'));
                     },
                      success: function (data){
                          var coden = data.content;
                          var codeRaw = Base64.decode(coden.replace('','\n'));
                          var codeText = htmlEntities(codeRaw);
                          $("#codeArea").html(codeText);
                      },
                      error: function (msg){
                        alert('Sorry no se pudo obtener el contenido del index: ' + msg.responseText);
                      }
                });
            }
            function updateContent(){
                var content = btoa($("#codeArea").html());
                var fileSha = $("#fileSha").text();
                var dataObject = {
                    'message': "Updating index.html",
                    'content': newContent,
                    'sha': fileSha
                };
                $.ajax
                ({
                      type: "PUT",
                      url: "https://api.github.com/repos/agendacultural/phonegap-start/contents/www/index.html",
                      contentType: 'application/json',
                      data: JSON.stringify(dataObject),
                      beforeSend: function (xhr) {
                         xhr.setRequestHeader('Authorization', make_base_auth('agendacultural@misideas.me', 'psclcdGH7'));
                     },
                      success: function (data){
                         alert("Success Updated " + data.name + " file!!");
                      },
                      error: function (msg){
                        alert('Sorry no se pudo actualizar el contenido del index: ' + msg.responseText);
                      }
                });
            }
            function make_base_auth(user, password) {
               var tok = user + ':' + password;
               var hash = btoa(tok);
               return 'Basic ' + hash;
            }
        &amp;lt;/script&amp;gt;
    &amp;lt;/head&amp;gt;
    &amp;lt;body&amp;gt;
        &amp;lt;div class="app2"&amp;gt;
            &amp;lt;h1&amp;gt;Telus&amp;lt;/h1&amp;gt;&amp;lt;/h1&amp;gt;
            &amp;lt;textarea id="codeArea" rows="20" cols="30"&amp;gt;&amp;lt;/textarea&amp;gt;
            &amp;lt;span id="fileSha"&amp;gt;&amp;lt;/span&amp;gt;
            &amp;lt;div id="deviceready" class="blink"&amp;gt;
                &amp;lt;p class="event listening"&amp;gt;Connecting to telus network&amp;lt;/p&amp;gt;
                &amp;lt;p class="event received"&amp;gt;Please tell us what you want&amp;lt;/p&amp;gt;
            &amp;lt;/div&amp;gt;
            &amp;lt;button onclick="onClick()"&amp;gt;Rebuild&amp;lt;/button&amp;gt;
            &amp;lt;button onclick="getContent()"&amp;gt;Content&amp;lt;/button&amp;gt;
            &amp;lt;button onclick="updateContent()"&amp;gt;Update&amp;lt;/button&amp;gt;
        &amp;lt;/div&amp;gt;
        &amp;lt;script type="text/javascript" src="cordova.js"&amp;gt;&amp;lt;/script&amp;gt;
        &amp;lt;script type="text/javascript" src="js/index.js"&amp;gt;&amp;lt;/script&amp;gt;
        &amp;lt;script type="text/javascript"&amp;gt;
            app.initialize();
        &amp;lt;/script&amp;gt;
    &amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
